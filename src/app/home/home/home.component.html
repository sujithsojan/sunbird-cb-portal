<div class="mat-body-2 karmapoints-panel" *ngIf="isKPPanelenabled">
    <p class="margin-remove">Earn <img src="/assets/icons/home/karma-badge.svg" alt="KarmaPoints"> <span class="font-bold"> 5 Karma Points </span> for your 1st course enrolment!</p>
    <mat-icon (click)="closeKarmaPointsPanel()" class="cursor-pointer">close</mat-icon>
</div>
<div class="home-container m-auto flex flex-row gap-6"
    [ngClass]="mobileTopHeaderVisibilityStatus ? 'home-container':'home-container-without-mobile-header'">
    <ng-container *ngIf="!homeConfig?.insightOnRight?.active">
        <div class="bg-info" [ngClass]="
        homeConfig?.leftSection?.active &&  homeConfig?.rightSection?.active ? 'left' :
        (homeConfig?.leftSection?.active &&  !homeConfig?.rightSection?.active) ? 'full' : ''"
            *ngIf="homeConfig?.leftSection?.active">
            <ng-container *ngIf="jan26Change && jan26Change.isEnabled">
                <div class="mob-logo items-center justify-center">
                    <img [src]="jan26Change?.mWeb?.logoUrl" alt="Application Logo" class="app-logo" />
                    <span class="mat-subheading-2 ws-mat-default-text margin-left-xs logo-text"> {{
                        jan26Change?.mWeb?.logoText}}</span>
                </div>
            </ng-container>
            <ws-in-sight-side-bar></ws-in-sight-side-bar>
        </div>

        <div class="bg-primary" [ngClass]="
        homeConfig?.leftSection?.active &&  homeConfig?.rightSection?.active ? 'right' :
        (!homeConfig?.rightSection?.active && !homeConfig?.leftSection?.active) ? 'full' : ''"
            *ngIf="homeConfig?.rightSection?.active">
            <div class="flex flex-col gap-4 mt-8">
                <!-- <div class="home-container mt-8">
                    <div class="flex flex-1">
                        <p class="mat-subheading-1 inline-block flex gap-2 items-center feed-title cursor-pointer" [routerLink]="'/page/learn'">
                            Go to learn hub
                            <mat-icon class="ws-mat-default-text mr-3 mat-icon notranslate material-icons mat-icon-no-color feed-title-icon" [color]="'accent'">navigate_next</mat-icon>
                        </p>
                    </div>
                </div> -->
                <ng-container *ngIf="enableLazyLoadingFlag">
                    <ng-container *ngFor="let item of contentStripData; let i=index; trackBy i">
                        <ng-container *ngFor="let vitem of sectionList;let j=index; trackBy j">
                            <span class="section_{{i}}" *ngIf="i==j">
                                <ng-container
                                    *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'section_'+i ) && item?.strips[0]?.active">
                                    <ws-feed-list [widgetData]="item"></ws-feed-list>
                                </ng-container>
                            </span>
                        </ng-container>
                    </ng-container>
                    <ng-container  [ngTemplateOutlet]="loadNewStrips" ></ng-container>

                    <div class="slider" *ngIf="sliderData && sliderData[0]?.active">
                        <ng-container *ngFor="let vitem of sectionList">
                            <ng-container *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'slider' )">
                                <ws-widget-sliders [widgetData]="sliderData"></ws-widget-sliders>
                            </ng-container>
                        </ng-container>
                    </div>

                    <!-- Discussion section starts here -->
                    <div class="discuss" *ngIf="homeConfig?.discussHub?.active">
                        <ng-container *ngFor="let vitem of sectionList">
                            <ng-container *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'discuss' )">
                                <ws-discuss-hub [discussConfig]="homeConfig?.discussHub"></ws-discuss-hub>
                            </ng-container>
                        </ng-container>
                    </div>
                    <!-- Discussion section ends here -->

                    <!-- Go to Network hub starts here -->
                    <div class="network" *ngIf="homeConfig?.networkHub?.active">
                        <ng-container *ngFor="let vitem of sectionList">
                            <ng-container *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'network' )">
                                <ws-network-hub [networkConfig]="homeConfig?.networkHub"></ws-network-hub>
                            </ng-container>
                        </ng-container>
                    </div>
                    <!-- Go to Network hub end here -->
                </ng-container>

                <ng-container *ngIf="!enableLazyLoadingFlag">
                    <ng-container *ngFor="let item of contentStripData; let i=index; trackBy i">
                        <ng-container *ngIf="item?.strips[0]?.active">
                            <ws-feed-list [widgetData]="item"></ws-feed-list>
                        </ng-container>
                    </ng-container>

                    <div class="slider" *ngIf="sliderData && sliderData[0]?.active">
                        <ws-widget-sliders [widgetData]="sliderData"></ws-widget-sliders>
                    </div>

                    <!-- Discussion section starts here -->
                    <div class="discuss" *ngIf="homeConfig?.discussHub?.active">
                        <ws-discuss-hub [discussConfig]="homeConfig?.discussHub"></ws-discuss-hub>
                    </div>
                    <!-- Discussion section ends here -->

                    <!-- Go to Network hub starts here -->
                    <div class="network" *ngIf="homeConfig?.networkHub?.active">
                        <ws-network-hub [networkConfig]="homeConfig?.networkHub"></ws-network-hub>
                    </div>
                    <!-- Go to Network hub end here -->
                </ng-container>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="homeConfig?.insightOnRight?.active">
        <div class="bg-primary" [ngClass]="
        homeConfig?.leftSection?.active &&  homeConfig?.rightSection?.active ? 'right' :
        (!homeConfig?.rightSection?.active && !homeConfig?.leftSection?.active) ? 'full' : ''"
            *ngIf="homeConfig?.rightSection?.active">
            <div class="flex flex-col gap-3 mt-8">
                <!-- <div class="home-container mt-8">
                    <div class="flex flex-1 cursor-pointer" [routerLink]="'/page/learn'">
                        <p class="mat-subheading-1 inline-block flex gap-2 items-center feed-title">
                            Go to learn hub
                            <mat-icon class="ws-mat-default-text mr-3 mat-icon notranslate material-icons mat-icon-no-color feed-title-icon" [color]="'accent'">navigate_next</mat-icon>
                        </p>
                    </div>
                </div> -->
                <ng-container *ngIf="enableLazyLoadingFlag">
                    <ng-container *ngFor="let item of contentStripData; let i=index; trackBy i">
                        <ng-container *ngFor="let vitem of sectionList;let j=index; trackBy j">
                            <span class="section_{{i}}" *ngIf="i==j">
                                <ng-container
                                    *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'section_'+i ) && item?.strips[0]?.active">
                                    <ws-feed-list [widgetData]="item"></ws-feed-list>
                                </ng-container>
                            </span>
                        </ng-container>
                    </ng-container>

                    <div class="slider" *ngIf="sliderData && sliderData[0]?.active">
                        <ng-container *ngFor="let vitem of sectionList">
                            <ng-container *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'slider' )">
                                <ws-widget-sliders [widgetData]="sliderData"></ws-widget-sliders>
                            </ng-container>
                        </ng-container>
                    </div>

                    <!-- Discussion section starts here -->
                    <div class="discuss" *ngIf="homeConfig?.discussHub?.active">
                        <ng-container *ngFor="let vitem of sectionList">
                            <ng-container *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'discuss' )">
                                <ws-discuss-hub [discussConfig]="homeConfig?.discussHub"></ws-discuss-hub>
                            </ng-container>
                        </ng-container>
                    </div>
                    <!-- Discussion section ends here -->

                    <!-- Go to Network hub starts here -->
                    <div class="network" *ngIf="homeConfig?.networkHub?.active">
                        <ng-container *ngFor="let vitem of sectionList">
                            <ng-container *ngIf="vitem && vitem['isVisible'] && (vitem['section'] == 'network' )">
                                <ws-network-hub [networkConfig]="homeConfig?.networkHub"></ws-network-hub>
                            </ng-container>
                        </ng-container>
                    </div>
                    <!-- Go to Network hub end here -->
                </ng-container>

                <ng-container *ngIf="!enableLazyLoadingFlag">
                    <ng-container *ngFor="let item of contentStripData; let i=index; trackBy i">
                        <ng-container *ngIf="item?.strips[0]?.active">
                            <ws-feed-list [widgetData]="item"></ws-feed-list>
                        </ng-container>
                    </ng-container>

                    <div class="slider" *ngIf="sliderData && sliderData[0]?.active">
                        <ws-widget-sliders [widgetData]="sliderData"></ws-widget-sliders>
                    </div>

                    <!-- Discussion section starts here -->
                    <div class="discuss" *ngIf="homeConfig?.discussHub?.active">
                        <ws-discuss-hub [discussConfig]="homeConfig?.discussHub"></ws-discuss-hub>
                    </div>
                    <!-- Discussion section ends here -->

                    <!-- Go to Network hub starts here -->
                    <div class="network" *ngIf="homeConfig?.networkHub?.active">
                        <ws-network-hub [networkConfig]="homeConfig?.networkHub"></ws-network-hub>
                    </div>
                    <!-- Go to Network hub end here -->
                </ng-container>
            </div>
        </div>

        <div class="bg-info" [ngClass]="
        homeConfig?.leftSection?.active &&  homeConfig?.rightSection?.active ? 'left' :
        (homeConfig?.leftSection?.active &&  !homeConfig?.rightSection?.active) ? 'full' : ''"
            *ngIf="homeConfig?.leftSection?.active">
            <ws-in-sight-side-bar></ws-in-sight-side-bar>
        </div>
    </ng-container>
</div>

<ws-client-slider [clientList]="clientList"></ws-client-slider>
<div class="download-section">
    <ws-download-app></ws-download-app>
</div>

<div class="footer footer-update-mobile-number" *ngIf="isNudgeOpen">
    <div (click)="handleRemindLater()" class="desktop-cross">X</div>
    <div class="update-mobile-number-flex">
        <span (click)="handleRemindLater()" class="mobile-cross">X</span>
        <img class="hand-icon" src="assets/icons/footer-nav/update-mobile-number.svg"/>
        <p class="updatetitle">{{ 'home.updateYourProfile' | translate }}</p>
        <button class="ui fluid-button update-now" (click)="fetchProfile()" role="button">{{ 'home.updateNow' | translate }}</button>
    </div>
</div>

<ng-template #loadNewStrips>
    <ng-container *ngFor="let newStrip of newHomeStrips">
        <sb-uic-content-strip-with-tabs 
        [providerId]="'01381906916850892825'" [widgetData]="newStrip"></sb-uic-content-strip-with-tabs>
    </ng-container>
</ng-template>